// ADDEVENTLISTENER

// Adiciona uma fun√ß√£o ao elemento, esta chamada de callback, que ser√° ativada assim que certo evento ocorrer neste elemento.

const img = document.querySelector('img');

// elemento.addEventListener(event, callback, options)
img.addEventListener('click', function() {
//   console.log('Clicou');
})

// O terceiro par√¢metro √© opcional.

// CALLBACK

// √â boa pr√°tica separar a fun√ß√£o de callback do addEventListener, ou seja, declarar uma fun√ß√£o ao inv√©s de passar diretamente uma fun√ß√£o an√¥nima

const img1 = document.querySelector('img');
function callback() {
//   console.log('Clicou');
}

img1.addEventListener('click', callback); // üöÄ
// img1.addEventListener('click', callback()); // undefined
// img1.addEventListener('click', function() {
//   console.log('Clicou');
// })
// img1.addEventListener('click', () => {
//   console.log('Clicou');
// })

// EVENT

// O primeiro par√¢metro do callback √© referente ao evento que ocorreu.

const img2 = document.querySelector('img');

function callback(event) {
//   console.log(event);
}

img2.addEventListener('click', callback);

// Geralmente utilizam e como nome do par√¢metro

// PROPRIEDADES DO EVENT

const animaisLista = document.querySelector('.animais-lista');

function executarCallback(event) {
  const currentTarget = event.currentTarget; // this
  const target = event.target; // onde o clique ocorreu
  const type = event.type; // tipo de evento
  const path = event.path;
//   console.log(currentTarget, target, type, path);
}

animaisLista.addEventListener('click', executarCallback);

// EVENT.PREVENTDEFAULT()

// Previne o comportamento padr√£o do evento no browser. No caso de um link externo, por exemplo, ir√° previnir que o link seja ativado.

const linkExterno = document.querySelector('a[href^="http"]');

function clickNoLink(event) {
  event.preventDefault();
  console.log(event.currentTarget.href);
}

linkExterno.addEventListener('click', clickNoLink);

// THIS

// A palavra chave this √© uma palavra especial de JavaScript, que pode fazer refer√™ncia a diferentes objetos dependendo do contexto. No caso de eventos, ela far√° refer√™ncia ao elemento em que addEventListener foi adicionado.

const img3 = document.querySelector('img');

function callback(event) {
//   console.log(this); // retorna a imagem
//   console.log(this.getAttribute('src'));
}

img3.addEventListener('click', callback);

// Geralmente igual ao event.currentTarget

// DIFERENTES EVENTOS

// Existem diversos eventos como click, scroll, resize, keydown, keyup, mouseenter e mais. Eventos podem ser adicionados a diferentes elementos, como o window e document tamb√©m.

const h1 = document.querySelector('h1');

function callback(event) {
//   console.log(event.type, event);
}

// h1.addEventListener('click', callback);
// h1.addEventListener('mouseenter', callback);
// window.addEventListener('scroll', callback);
// window.addEventListener('resize', callback);
// window.addEventListener('keydown', callback);

// https://developer.mozilla.org/en-US/docs/Web/Events

// KEYBOARD

// Voc√™ pode adicionar atalhos para facilitar a navega√ß√£o no seu site, atrav√©s de eventos do keyboard.

function handleKeyboard(event) {
    if(event.key === 'a')
      document.body.classList.toggle('azul');
    else if(event.key === 'v')
      document.body.classList.toggle('vermelho');
  }
  
  window.addEventListener('keydown', handleKeyboard);

// function handleKeyboard(event) {
//     console.log(event.key);
// }

// window.addEventListener('keydown', handleKeyboard);

// FOREACH E EVENTOS

// O m√©todo addEventListener √© adicionado √† um √∫nico elemento, ent√£o √© necess√°rio um loop entre elementos de uma lista, para adicionarmos √† cada um deles.

const imgs = document.querySelectorAll('img');

function imgSrc(event) {
  const src = event.currentTarget.getAttribute('src');
  // console.log(src);
}

imgs.forEach((img) => {
  img.addEventListener('click', imgSrc);
});

// EXERC√çCIO

// 1) Quando o usu√°rio clicar nos links internos do site,
// adicione a classe ativo ao item clicado e remova dos
// demais itens caso eles possuam a mesma. Previna
// o comportamento padr√£o desses links
const linksInternos = document.querySelectorAll('a[href^="#"]')

function callback1(event){
  event.preventDefault()
  linksInternos.forEach((item) => {
    item.classList.remove('ativo')
  });
  event.currentTarget.classList.add('ativo'); // ou this.classList.add('ativo')
}

linksInternos.forEach((item) => {
  item.addEventListener('click', callback1);
})

// 2) Selecione todos os elementos do site come√ßando a partir do body,
// ao clique mostre exatamente quais elementos est√£o sendo clicados

// const elementos = document.querySelectorAll('body *')

// function callback2(event){
//   console.log(event.currentTarget)
//   event.stopPropagation();
// }

// elementos.forEach((elemento) => {
//   elemento.addEventListener('click', callback2);
// })


// 3) Utilizando o c√≥digo anterior, ao inv√©s de mostrar no console,
// remova o elemento que est√° sendo clicado, o m√©todo remove() remove um elemento

// const elementos = document.querySelectorAll('body *')

// function callback3(event){
//   event.currentTarget.remove()
//   event.stopPropagation();
// }

// elementos.forEach((elemento) => {
//   elemento.addEventListener('click', callback3);
// })

// Se o usu√°rio clicar na tecla (t), aumente todo o texto do site. 

// const elementos = document.querySelectorAll('body *')

// function callback4(event) {
//   if(event.key === 't')
//     document.documentElement.classList.toggle('textomaior')
// }

// window.addEventListener('keydown', callback4);


